# fit_score 임계값 캘리브레이션 결과

실행일: 2026-02-25 13:45

## 방법론

- 합성 시나리오 18개 (6종 문서 x 3종 프로필 + 경계선 케이스)
- threshold sweep: 0.40 ~ 0.95 (0.05 간격, 12단계)
- 선택 기준: Precision >= 0.9 조건에서 F1 최대 (보수적: FP 최소화 우선)

## 시나리오별 fit_score

| 시나리오 | fit_score | 기대 신호 |
|---------|-----------|----------|
| 수협_적합기업 | 1.000 | GREEN |
| NCIC_적합기업 | 1.000 | GREEN |
| 응급의료_적합기업 | 1.000 | GREEN |
| 수협_면허미보유 | 0.700 | RED |
| 철도공사_신용미달 | 0.800 | RED |
| 스포츠윤리_지역불일치 | 0.800 | RED |
| 응급의료_마감경과 | 0.900 | RED |
| NCIC_복수RED | 0.500 | RED |
| 수협_정보부족 | 0.850 | GRAY |
| 철도공사_면허불명확 | 0.850 | GRAY |
| NCIC_신용불명확 | 0.900 | GRAY |
| 응급의료_지역불명확 | 0.900 | GRAY |
| 스포츠윤리_정보완전성GRAY | 0.950 | GRAY |
| 수협_예산소형만GRAY | 0.950 | GRAY |
| 철도공사_마감주의만GRAY | 0.950 | GRAY |
| 응급의료_필수GREEN_비필수GRAY | 0.900 | GRAY |
| NCIC_거의GREEN_정보미완 | 0.950 | GRAY |
| 스포츠윤리_RED+GRAY혼합 | 0.500 | RED |

## Sweep 결과

| Threshold | Precision | Recall | F1 | Accuracy | RED정확도 | GREEN->GRAY | GRAY->GREEN |
|-----------|-----------|--------|-----|----------|----------|------------|------------|
| 0.40 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.45 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.50 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.55 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.60 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.65 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.70 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.75 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.80 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.85 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.90 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |
| 0.95 | 1.000 | 1.000 | 1.000 | 1.000 | 1.000 | 0 | 0 |

## 최적 임계값: **0.70 유지** (전 구간 완벽)

- 전 threshold 구간(0.40~0.95)에서 Precision=1.0, Recall=1.0, F1=1.0
- 신호 판정 로직 강화로 threshold 의존성이 크게 감소
- 기존 0.70 유지 (안전 마진 확보, 향후 실데이터에서 경계선 케이스 발생 시 대비)

## 신호 판정 로직 변경 (v1 → v2)

### v1 (초기 설계)
- RED: 필수 슬롯(면허/신용/지역)에 RED가 있으면 RED
- GREEN: 필수 슬롯 전부 GREEN + fit_score >= threshold + 정보완전성 GREEN
- **문제**: 비필수 RED(마감 경과)가 RED로 안 잡힘, 비필수 GRAY가 GREEN으로 통과

### v2 (강화, 적용됨)
- RED: **어떤 슬롯이든** RED가 있으면 RED (마감 경과, 예산 부적격 등 포함)
- GREEN: **모든 슬롯이 GREEN** + fit_score >= threshold
- GRAY: 나머지 (GRAY 슬롯 존재 시 자동 GRAY)

### 변경 효과
- RED 정확도: 0.833 → **1.000** (비필수 RED 케이스 포착)
- GREEN Precision: 0.429~0.600 → **1.000** (GRAY 슬롯 GREEN 유출 차단)
- FP(GRAY→GREEN 오판): 2~3건 → **0건**

## 권고

- `configs/base.yaml`의 `signal.green_threshold`는 **0.70 유지**
- 신호 판정 로직 v2가 threshold보다 더 큰 안전장치 역할
- 실제 문서 운영 데이터 축적 후 재캘리브레이션 권장
- 라벨셋 확장 시 (실제 추출 결과 + 수동 라벨) 정밀도 추가 검증 가능